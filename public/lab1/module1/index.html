<!DOCTYPE html>
<html lang="ko" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.64.1" />
    <meta name="description" content="AWS IoT Services Workshop">
<meta name="author" content="Yijeong Cho, Albert Lee">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>환경 구성 :: AWS IoT 서비스 워크샵</title>

    
    <link href="/css/nucleus.css?1587447989" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1587447989" rel="stylesheet">
    <link href="/css/hybrid.css?1587447989" rel="stylesheet">
    <link href="/css/featherlight.min.css?1587447989" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1587447989" rel="stylesheet">
    <link href="/css/auto-complete.css?1587447989" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1587447989" rel="stylesheet">
    <link href="/css/theme.css?1587447989" rel="stylesheet">
    <link href="/css/hugo-theme.css?1587447989" rel="stylesheet">
    
      <link href="/css/theme-aws.css?1587447989" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1587447989"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/lab1/module1/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">
	<img src="/images/logo.png" height="70px"/>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1587447989"></script>
<script type="text/javascript" src="/js/auto-complete.js?1587447989"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/master.d2r6v7ins5jzsk.amplifyapp.com\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1587447989"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/lab1/" title="환경 구성" class="dd-item 
        parent
        
        
        ">
      <a href="/lab1/">
          <b>모듈 1. </b>환경 구성
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/lab1/module1/" title="환경 구성" class="dd-item active">
        <a href="/lab1/module1/">
        <b>1.1 </b>환경 구성
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/lab2/" title="IoT Device 구성" class="dd-item 
        
        
        
        ">
      <a href="/lab2/">
          <b>모듈 2. </b>IoT Device 구성
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/lab2/module1/" title="IoT device 기본 구성 (콘솔)" class="dd-item ">
        <a href="/lab2/module1/">
        <b>2.1 </b>IoT device 기본 구성 (콘솔)
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/lab2/module2/" title="IoT device 기본 구성 (디바이스)" class="dd-item ">
        <a href="/lab2/module2/">
        <b>2.2 </b>IoT device 기본 구성 (디바이스)
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/lab3/" title="IoT 보안 터널링 구성" class="dd-item 
        
        
        
        ">
      <a href="/lab3/">
          <b>모듈 3. </b>IoT 보안 터널링 구성
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/lab3/module1/" title="IoT 보안 터널링" class="dd-item ">
        <a href="/lab3/module1/">
        <b>3.1 </b>IoT 보안 터널링
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/lab3/module2/" title="IoT 보안 터널링 구성(수동)" class="dd-item ">
        <a href="/lab3/module2/">
        <b>3.2 </b>IoT 보안 터널링 구성(수동)
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/lab3/module3/" title="IoT 보안 터널링 구성(자동)" class="dd-item ">
        <a href="/lab3/module3/">
        <b>3.3 </b>IoT 보안 터널링 구성(자동)
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/lab3/module4/" title="내용 정리" class="dd-item ">
        <a href="/lab3/module4/">
        <b>3.4 </b>내용 정리
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/lab4/" title="자원 삭제" class="dd-item 
        
        
        
        ">
      <a href="/lab4/">
          <b>모듈 4. </b>자원 삭제
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/lab4/module1/" title="자원 삭제" class="dd-item ">
        <a href="/lab4/module1/">
        <b>4.1 </b>자원 삭제
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3></h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://master.d2r6v7ins5jzsk.amplifyapp.com/credits/"><i class='fas fa-fw fa-bullhorn'></i> 크레딧</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> </a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      © 2020 Amazon Web Services, Inc. or its Affiliates. All rights reserved.

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>홈</a> > <a href='/lab1/'>환경 구성</a> > 환경 구성
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#사전-준비-사항">사전 준비 사항</a></li>
    <li><a href="#리전-선택">리전 선택</a></li>
    <li><a href="#리소스-생성">리소스 생성</a>
      <ul>
        <li><a href="#ec2-키페어-생성-이미-생성된-경우-이-단계-생략-가능">EC2 키페어 생성 (이미 생성된 경우 이 단계 생략 가능)</a></li>
        <li><a href="#cloudformation-으로-초기-환경-구성">cloudformation 으로 초기 환경 구성</a></li>
        <li><a href="#ggad-용-ec2-인스턴스-접속확인">GGAD 용 EC2 인스턴스 접속확인</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              환경 구성
            </h1>
          

        



<h2 id="사전-준비-사항">사전 준비 사항</h2>
<ul>
<li>AWS 계정 및 IAM User : IAM, AWS IoT, Amazon EC2 에 대한 권한이 있는 IAM User를 사용해야 합니다.</li>
<li>브라우저: 최신 버전의 크롬, 파이어폭스</li>
</ul>
<h2 id="리전-선택">리전 선택</h2>
<ul>
<li>AWS 리전: 이번 실습은 <em><strong>버지니아 북부</strong></em> (us-east-1) 리전에서 실행합니다.</li>
</ul>
<h2 id="리소스-생성">리소스 생성</h2>
<h3 id="ec2-키페어-생성-이미-생성된-경우-이-단계-생략-가능">EC2 키페어 생성 <strong>(이미 생성된 경우 이 단계 생략 가능)</strong></h3>
<ol>
<li>
<p>EC2 키페어는 EC2인스턴스 생성을 위해 필요한 항목이므로, CloudFormation 템플릿을 실행하기에 앞서 EC2 키페어를 생성합니다.</p>
</li>
<li>
<p>이미 EC2 키페어가 생성된 경우라면, 이 단계를 생략합니다. EC2 키페어가 없다면 EC2 콘솔로 <a href="https://console.aws.amazon.com/ec2/v2/home?region=us-east-1#KeyPairs:">접속</a>하여 키페어를 생성합니다.</p>
</li>
<li>
<p>EC2 콘솔 화면의 좌측 메뉴에서 “키 페어”를 클릭하고 “키 페어 생성” 버튼을 클릭합니다.</p>
</li>
<li>
<p>“키 페어 이름”에 “SFworkshop-keypair”를 입력한 후, “생성”을 클릭합니다.</p>
</li>
<li>
<p>생성이 완료되면 “SFworkshop-keypair.pem” 파일이 임의의 폴더에 자동으로 다운로드됩니다.</p>
</li>
</ol>
<p><img src="/lab1/image/keypair_1.png" alt="Keypair"></p>

<div class="notices warning" ><p>다운받은 프라이빗 키는 분실하면 다시 복구할 수 없습니다. 워크샵동안 잘 관리해주시기 바랍니다.</p>
</div>

<h3 id="cloudformation-으로-초기-환경-구성">cloudformation 으로 초기 환경 구성</h3>
<p>직관적인 IoT 환경을 구현하기 위해서는 raspberry pi 혹은 intel miniPC와 같은 장비로 진행을 하는 것이 가장 좋지만, 해당 자원을 확보하지 않은 사용자를 위해 EC2로 device를 시뮬레이션 합니다. 
워크샵 환경을 구성하기 위해 CloudFormation을 실행합니다. CloudFormation을 통해 다음과 같은 AWS 리소스가 생성됩니다.</p>
<table>
<thead>
<tr>
<th>AWS 서비스 유형</th>
<th>리소스명</th>
<th>기타</th>
</tr>
</thead>
<tbody>
<tr>
<td>VPC</td>
<td>SFworkshop-VPC</td>
<td>10.0.0.0/16</td>
</tr>
<tr>
<td>VPC Subnet</td>
<td>SFworkshop-public-Sub</td>
<td>10.0.0.0/24</td>
</tr>
<tr>
<td>VPC Subnet</td>
<td>SFworkshop-private-Sub</td>
<td>10.10.2.0/24</td>
</tr>
<tr>
<td>Cloud9</td>
<td>SFworkshop-GGC</td>
<td>개발환경, c5.large</td>
</tr>
<tr>
<td>EC2</td>
<td>SFworkshop-thing-instance</td>
<td>GGAD용 인스턴스, t3.large</td>
</tr>
<tr>
<td>EC2</td>
<td>SFworkshop-admin-instance</td>
<td>admin용 인스턴스, t2.micro</td>
</tr>
<tr>
<td>기타 서비스</td>
<td>Elastic IP, Route table, Security Groups, NAT Gateway, IAM Role 등</td>
<td></td>
</tr>
</tbody>
</table>
<ol>
<li>
<p><a href="https://console.aws.amazon.com/">AWS 관리 콘솔</a>로 접속해서, 아래의 화면과 같이 AWS 버지니아 북부 리전이 선택되었는지 확인합니다.
<a  href="https://console.aws.amazon.com/" target="_blank"  class="btn btn-default">
  
  
  
    
  <i class="fas fa-terminal"></i>
    
  
  Open AWS Console
  
</a>
 본 실습 의 모든 과정은 버지니아 북부(N.Virginia) 리전에서 이루어지므로, 원활한 실습 진행을 위해서 반드시 올바른 리전이 선택되었는지를 확인하시기 바랍니다.
<img src="/lab1/image/region_select.png" alt="Region Select"></p>
</li>
<li>
<p>CloudFormation 템플릿을 실행하기 위해 <a href="https://us-east-1.console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/quickcreate?templateURL=https://do-not-delete-smartfactory-cloudformation-template.s3.amazonaws.com/template/iotsecuretunneling.template&amp;stackName=SmartFactoryworkshop">링크</a>를 클릭합니다. <a href="https://us-east-1.console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/quickcreate?templateURL=https://do-not-delete-smartfactory-cloudformation-template.s3.amazonaws.com/template/iotsecuretunneling.template&amp;stackName=SmartFactoryworkshop">링크</a>를 클릭하면 아래와 같은 화면이 표시됩니다. 파라미터는 수정하지 않으셔도 됩니다.</p>
</li>
</ol>
<p><img src="/lab1/image/cloudformation_1.png" alt="cloudformation"></p>
<ol start="3">
<li>정상적으로 진행이 되는 경우 아래와 같이 2개의 스택의 상태가 &ldquo;CREATE_COMPLETE)으로 되어 있는 것을 확인하실 수 있습니다. 
<img src="/lab1/image/cloudformation_3.png" alt="cloudformation"></li>
</ol>

<div class="notices info" ><p>해당 템플릿은 별도의 VPC 와 EIP 등을 추가로 생성하므로  기존에 사용하던 계정에 VPC 나 EIP 의 수가 한계에 도달한 경우 스택 생성이 실패할 수 있습니다. 그런 경우에는 추가 자원을 확보한 뒤에 다시 스택 생성을 해주시기 바랍니다.</p>
</div>

<h3 id="ggad-용-ec2-인스턴스-접속확인">GGAD 용 EC2 인스턴스 접속확인</h3>
<ol start="4">
<li><strong>SmartFactoryworkshop</strong> 스택의 출력 탭에서 <strong>Cloud9</strong>의 값을 확인하고 클릭하여 접속합니다. 
<img src="/lab1/image/cloudformation_4.png" alt="cloudformation">
<img src="/lab1/image/cloud9_1.png" alt="cloud9"></li>
</ol>

<div class="notices info" ><p>이 워크샵에서 cloud9 인스턴스는 private subnet에 있는 GGAD용 EC2에 접근하기 위한 bastion host 역할을 맡게 됩니다. 통일성을 위해 앞으로 이 cloud9 인스턴스는 <strong>GGC</strong>(Greengrass Core)라고 부르도록 하겠습니다.</p>
</div>

<ol start="5">
<li>
<p>cloud9에서 GGAD(EC2 instance)인스턴스로 접근할 수 있도록 keypair를 가져와야합니다. 상단의 File &gt; Upload Local Files… 메뉴를 이용하여, 처음에 다운 받은 <em><strong>SFworkshop-keypair.pem</strong></em> 파일을 Cloud9 IDE에 업로드합니다.
<img src="/lab1/image/key_copy_1.png" alt="cloud9">
<img src="/lab1/image/key_copy_2.png" alt="cloud9"></p>
</li>
<li>
<p>import한 키 파일의 권한을 변경합니다.</p>
</li>
</ol>
<pre><code>chmod 400 ~/environment/SFworkshop-keypair.pem
</code></pre><ol start="7">
<li>원활한 워크샵 진행을 위해 cloudformation 으로 생성한 EC2 인스턴스의 private IP를 찾아 환경 변수로 설정합니다. 
<img src="/lab1/image/cloudformation_5.png" alt="cloudformation"></li>
</ol>
<pre><code>export GGAD_IP=&lt;사설IP&gt;
</code></pre>
<div class="notices info" ><p>이 워크샵에서 EC2 인스턴스는 Greengrass Awared Device 역할을 맡게 됩니다. 통일성을 위해 앞으로 이 cloud9 인스턴스는 <strong>GGAD</strong>(Greengrass Awared Device)라고 부르도록 하겠습니다.</p>
</div>

<ol start="8">
<li>정상적으로 접속이 되는지 확인합니다. <em>Are you sure you want to continue connecting (yes/no)</em> 문구가 나오면 <em>yes</em>라고 입력하여 응답합니다.</li>
</ol>
<pre><code>ssh -i ~/environment/SFworkshop-keypair.pem ubuntu@$GGAD_IP
</code></pre><ol start="9">
<li>정상적으로 로그인이 되는 것이 확인되면 다시 GGAD 인스턴스틑 빠져나옵니다.</li>
</ol>
<pre><code>exit
</code></pre><hr>
<ul>
<li>위와 같은 작업을 통해 아래와 환경이 준비됩니다. 
<img src="/lab1/image/architecture_1.png" alt="Lab Diagram"></li>
</ul>
<hr>
<p>© 2020 Amazon Web Services, Inc. 또는 자회사, All rights reserved.</p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/lab1/" title="환경 구성"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/lab2/" title="IoT Device 구성" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1587447989"></script>
    <script src="/js/perfect-scrollbar.min.js?1587447989"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1587447989"></script>
    <script src="/js/jquery.sticky.js?1587447989"></script>
    <script src="/js/featherlight.min.js?1587447989"></script>
    <script src="/js/highlight.pack.js?1587447989"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1587447989"></script>
    <script src="/js/learn.js?1587447989"></script>
    <script src="/js/hugo-learn.js?1587447989"></script>

    <link href="/mermaid/mermaid.css?1587447989" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1587447989"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    
  </body>
</html>

